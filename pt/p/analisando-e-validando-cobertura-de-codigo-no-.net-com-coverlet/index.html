<!doctype html><html lang=pt-br dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Qualidade de código no .NET - Parte 3"><title>Analisando e validando cobertura de código no .NET com Coverlet</title><link rel=canonical href=https://blog.genezini.com/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/><link rel=stylesheet href=/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css><meta property="og:title" content="Analisando e validando cobertura de código no .NET com Coverlet"><meta property="og:description" content="Qualidade de código no .NET - Parte 3"><meta property="og:url" content="https://blog.genezini.com/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/"><meta property="og:site_name" content="Daniel Genezini"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="Testes"><meta property="article:tag" content="Testes de Unidade"><meta property="article:tag" content="Testes Automatizados"><meta property="article:tag" content="Testes de Integração"><meta property="article:tag" content="Coverlet"><meta property="article:tag" content="Cobertura de código"><meta property="article:tag" content="C#"><meta property="article:published_time" content="2022-11-03T08:10:00-03:00"><meta property="article:modified_time" content="2022-11-03T08:10:00-03:00"><meta property="og:image" content="https://blog.genezini.com/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/cover.pt.png"><meta name=twitter:title content="Analisando e validando cobertura de código no .NET com Coverlet"><meta name=twitter:description content="Qualidade de código no .NET - Parte 3"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.genezini.com/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/cover.pt.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-029SLZEC4C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-029SLZEC4C",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Alternar Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/pt/><img src=/img/avatar_hu793066471163999a4414bfb3be66f111_30130_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/pt>Daniel Genezini</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/dgenezini/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/danielgenezini/ target=_blank title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/GeneziniDaniel target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/pt/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/pt/arquivo/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Arquivo</span></a></li><li><a href=/pt/pesquisar/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Pesquisar</span></a></li><li><a href=/pt/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://blog.genezini.com/>🇬🇧 English</option><option value=https://blog.genezini.com/pt/ selected>🇧🇷 Português</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Modo Escuro</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/cover.pt.png width=1300 height=250 loading=lazy alt="Featured image of post Analisando e validando cobertura de código no .NET com Coverlet"></a></div><div class=article-details><header class=article-category><a href=/pt/categories/dotnet/>.NET</a>
<a href=/pt/categories/c-sharp/>C#</a>
<a href=/pt/categories/testes/>Testes</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/>Analisando e validando cobertura de código no .NET com Coverlet</a></h2><h3 class=article-subtitle>Qualidade de código no .NET - Parte 3</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>03 Nov 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>7 minutos de leitura</time></div></footer><footer class=article-translations><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://blog.genezini.com/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/ class=link>🇬🇧 English</a></div></footer></div></header><section class=article-content><h1 id=introdução>Introdução</h1><p>Testes automatizados são um requisito para garantir a entrega de um produto de qualidade para nossos usuários. Eles ajudam a encontrar bugs e requisitos não cumpridos ainda em tempo de desenvolvimento, mas também diminuem o custo de manutenção fazendo alterações futuras no código mais seguras. Além disso, o ato de escrever código testável, por si só, aumenta a qualidade do código, pois código testável precisa ser desacoplado.</p><p>Nesse último post da série, vou mostrar como analisar e validar uma cobertura mínima de código nas nossas aplicações, além de como utilizar testes de integração para aumentar a cobertura do código.</p><h1 id=o-que-é-cobertura-de-código>O que é cobertura de código?</h1><p>Cobertura de código é uma métrica de software que mostra o quanto do nosso código é executado (coberto) por nossos testes automatizados. Ela é expressa em um percentual e pode ser calculada de diferentes formas, baseada na quantidade de linhas ou de branches, por exemplo. Quanto maior o percentual, mais do nosso código está sendo testado.</p><h1 id=analisando-a-cobertura-de-código-da-nossa-aplicação>Analisando a cobertura de código da nossa aplicação</h1><p>Nesse exemplo, temos uma API ASP.NET Core com um use case simples que verifica se um número é par ou ímpar e retorna uma string:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.Interfaces</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCase</span> <span class=p>:</span> <span class=n>IIsEvenUseCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>IsEven</span><span class=p>(</span><span class=kt>int</span> <span class=n>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>number</span> <span class=p>%</span> <span class=m>2</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;Número é par&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;Número é ímpar&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Por enquanto, temos apenas um teste de unidade para essa classe:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCaseTests</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>NumeroPar_RetornaPar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Número é par&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Para analisar a cobertura de código da nossa aplicação, primeiro precisamos instalar em nosso projeto de teste o pacote nuget <code>coverlet.msbuild</code>, que faz a integração do Coverlet com o MSBuild:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Install-Package coverlet.collector
</span></span></code></pre></div><p>Então, executamos o comando <code>dotnet test</code> com os parâmetros do Coverlet no diretório da nossa solution ou no diretório do projeto da nossa API:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>../TestResults
</span></span></code></pre></div><p>Estamos usando os seguintes parâmetros:</p><ul><li><strong>CollectCoverage</strong>: Informa o dotnet test para usar o Coverlet para coletar dados de cobertura de código;</li><li><strong>CoverletOutputFormat</strong>: Formato do relatório que será gerado pelo Coverlet (opencover, cobertura, json). Detalhes <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md target=_blank rel=noopener>aqui</a>;</li><li><strong>CoverletOutput</strong>: Caminho onde o relatório será gravado. Esse caminho é relativo ao projeto de teste;</li></ul><p>O comando irá mostrar uma tabela com a cobertura de código e gerar um arquivo de relatório com o nome <code>TestResults.opencover.xml</code>:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/CommandLine1.png width=1115 height=628 loading=lazy alt="Retorno da cobertura de código na linha de comando" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><blockquote><p>⚠️ Podemos também executar o Coverlet na linha de comando com o pacote nuget <code>coverlet.collector</code>, porém ele possui poucos parâmetros e não imprime os resultados na linha de comando. Mais detalhes <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md target=_blank rel=noopener>aqui</a>;</p></blockquote><h1 id=gerando-relatórios-em-html>Gerando relatórios em HTML</h1><p>O Coverlet gera relatórios em formatos que não são facilmente lidos por humanos, então precisamos gerar um relatório HTML baseado no relatório do Coverlet. Para isso, vamos usar uma ferramenta chamada ReportGenerator.</p><h2 id=instalando-o-reportgenerator>Instalando o ReportGenerator</h2><p>O ReportGenerator é instalado como um global tool do .NET.</p><p>Para isso, executamos o comando abaixo:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet tool install --global dotnet-reportgenerator-globaltool
</span></span></code></pre></div><h2 id=gerando-um-relatório-em-html-a-partir-de-um-relatório-opencover>Gerando um relatório em HTML a partir de um relatório opencover</h2><p>Para gerar um relatório em HTML a partir de um relatório do Coverlet, executamos o comando abaixo:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>reportgenerator <span class=s2>&#34;-reports:TestResults.opencover.xml&#34;</span> <span class=s2>&#34;-targetdir:coveragereport&#34;</span> -reporttypes:Html
</span></span></code></pre></div><p>Estamos usando os seguintes parâmetros:</p><ul><li><strong>reports</strong>: Caminho para o relatório do Coverlet;</li><li><strong>targetdir</strong>: Caminho onde o relatório HTML será salvo;</li><li><strong>reporttypes</strong>: Formato em que o relatório será salvo.</li></ul><p>O retorno do comando mostrará o caminho relativo para o relatório gerado: <code>coveragereport\index.html</code>.</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/Report0.png width=1115 height=628 loading=lazy alt="Retorno do ReportGenerator" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>Abrindo o arquivo <code>coveragereport\index.html</code> nós podemos ver a cobertura de linhas e de branches do projeto:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/Report1.png width=1233 height=555 loading=lazy alt="Resumo no relatório em HTML" class=gallery-image data-flex-grow=222 data-flex-basis=533px></p><p>Clicando em <code>CodeCoverageSample.UseCases.IsEvenUseCase</code> nós podemos ver detalhes da cobertura de código da classe, cobertura de código por método (na tabela):</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/Report2.png width=876 height=1196 loading=lazy alt="Detalhes da classe no relatório em HTML" class=gallery-image data-flex-grow=73 data-flex-basis=175px></p><h1 id=cobertura-de-linhas-vs-cobertura-de-branches>Cobertura de linhas vs cobertura de branches</h1><p>Mas o que é cobertura de linhas e cobertura de branches?</p><ul><li><strong>Cobertura de linhas</strong>: Indica o percentual de linhas que estão cobertos pelos testes;</li><li><strong>Cobertura de branches</strong>: Indica o percentual de caminhos lógicos que estão cobertos pelos testes (if, else, condições em um switch, etc).</li></ul><p>No exemplo abaixo, podemos ver que duas linhas no branch <code>else</code> não estão sendo cobertas pelos testes.</p><p>Isso irá resultar em:</p><ul><li>50% de cobertura de branches, porque apenas a branch do <code>if</code> está coberta;</li><li>71.4% de cobertura de linhas, porque apenas 5 das 7 linhas estão cobertas.</li></ul><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/LineBranchCoverage.png width=434 height=411 loading=lazy class=gallery-image data-flex-grow=105 data-flex-basis=253px></p><h1 id=cobertura-de-código-no-visual-studio>Cobertura de código no Visual Studio</h1><p>O Visual Studio possui uma extensão chamada <em><strong>Run Coverlet Report</strong></em> que o integra com Coverlet e o ReportGenerator.</p><ol><li>Primeiro, precisamos instalar o pacote nuget <code>coverlet.collector</code> nos nossos projetos de teste. Projetos de teste criados com o template do Xunit já vem com esse pacote instalado por padrão.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Install-Package coverlet.collector
</span></span></code></pre></div><ol start=2><li>Depois, acesse <code>Extensions > Manage extensions</code> e instale a extensão <code>Run Coverlet Report</code>.</li></ol><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/VisualStudioReport0.png width=941 height=575 loading=lazy class=gallery-image data-flex-grow=163 data-flex-basis=392px></p><ol start=3><li>Acesse a nova opção <code>Tools > Run Code Coverage</code>. O Visual Studio irá gerar e exibir um relatório em HTML.</li></ol><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/VisualStudioReport1.png width=1366 height=728 loading=lazy class=gallery-image data-flex-grow=187 data-flex-basis=450px></p><p>Além disso, após executar a análise de cobertura de código, o Visual studio irá ler o relatório do coverlet e mostrar a cobertura no nosso fonte:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/VisualStudioIntegration1.png width=639 height=425 loading=lazy class=gallery-image data-flex-grow=150 data-flex-basis=360px></p><h1 id=aumentando-nossa-cobertura-de-código>Aumentando nossa cobertura de código</h1><h2 id=corrigindo-os-testes-de-unidade>Corrigindo os testes de unidade</h2><p>Agora vamos implementar o método <code>NumeroImpar_RetornaImpar</code> para testar o caminho lógico que não testamos anteriormente:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCaseTests</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>NumeroPar_RetornaPar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Número é par&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>NumeroImpar_RetornaImpar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Número é ímpar&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Isso irá aumentar nossa cobertura de código para 50% das branches e 22.58% das linhas:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/CommandLine2.png width=1115 height=628 loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>E 100% para a classe <code>IsEvenUseCase</code>:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/Report3.png width=1125 height=605 loading=lazy class=gallery-image data-flex-grow=185 data-flex-basis=446px></p><h2 id=implementando-testes-de-integração>Implementando testes de integração</h2><p>Testes de integração com a classe <code>WebApplicationFactory</code> (Mais sobre <a class=link href=/pt/p/testes-de-integracao-com-aspnet-core-e-wiremocknet/>aqui</a>) também são considerados nos relatórios de cobertura de código. Vamos ver a cobertura de código das classes <code>IsEvenController</code> e <code>Program</code>:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/IntegrationTests1.png width=572 height=349 loading=lazy class=gallery-image data-flex-grow=163 data-flex-basis=393px></p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/IntegrationTests2.png width=770 height=376 loading=lazy class=gallery-image data-flex-grow=204 data-flex-basis=491px></p><p>Agora vamos implementar um teste de integração simples. Ele irá apenas instanciar nossa API e fazer uma chamada passando um número e validando o retorno:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>Microsoft.AspNetCore.Mvc.Testing</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Net</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests.IntegrationTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenIntegrationTest</span> <span class=p>:</span> <span class=n>IClassFixture</span><span class=p>&lt;</span><span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>readonly</span> <span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;</span> <span class=n>_factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>IsEvenIntegrationTest</span><span class=p>(</span><span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;</span> <span class=n>factory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_factory</span> <span class=p>=</span> <span class=n>factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Theory]</span>
</span></span><span class=line><span class=cl><span class=na>    [InlineData(2, &#34;Número é par&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [InlineData(3, &#34;Número é ímpar&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>Numero_RetornaCorretoEOk</span><span class=p>(</span><span class=kt>int</span> <span class=n>number</span><span class=p>,</span> <span class=kt>string</span> <span class=n>expectedResult</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>HttpClient</span> <span class=p>=</span> <span class=n>_factory</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>CreateClient</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>HttpResponse</span> <span class=p>=</span> <span class=k>await</span> <span class=n>HttpClient</span><span class=p>.</span><span class=n>GetAsync</span><span class=p>(</span><span class=s>$&#34;/iseven/{number}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=n>HttpStatusCode</span><span class=p>.</span><span class=n>OK</span><span class=p>,</span> <span class=n>HttpResponse</span><span class=p>.</span><span class=n>StatusCode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>ResponseStr</span> <span class=p>=</span> <span class=k>await</span> <span class=n>HttpResponse</span><span class=p>.</span><span class=n>Content</span><span class=p>.</span><span class=n>ReadAsStringAsync</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=n>expectedResult</span><span class=p>,</span> <span class=n>ResponseStr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Agora geramos o relatório de cobertura de código novamente e as classes <code>IsEvenController</code> e <code>Program</code> estão cobertas por nossos testes:</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/IntegrationTests3.png width=583 height=347 loading=lazy class=gallery-image data-flex-grow=168 data-flex-basis=403px></p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/IntegrationTests4.png width=647 height=376 loading=lazy class=gallery-image data-flex-grow=172 data-flex-basis=412px></p><h2 id=removendo-código-da-análise-de-cobertura-de-código>Removendo código da análise de cobertura de código</h2><p>Se quisermos remover uma classe ou método da análise de cobertura de código, podemos decorar ele com o atributo <code>ExcludeFromCodeCoverage</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Diagnostics.CodeAnalysis</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[ExcludeFromCodeCoverage]</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>NaoMeTeste</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ℹ️ <strong>Nós também podemos criar atributos personalizados</strong> para excluir código da cobertura de código. Detalhes <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md#attributes target=_blank rel=noopener>aqui</a>.</p></blockquote><h2 id=ignorando-auto-properties>Ignorando auto-properties</h2><p>O Coverlet possui o parâmetro <code>SkipAutoProps</code> que permite excluir as auto-properties da análise de cobertura de código.</p><p>Por exemplo, essa classe não possui nenhuma lógica e não precisa que os métodos <code>get</code> e <code>set</code> das suas propriedades sejam testados:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>SemLogicaAqui</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Id</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Nome</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Basta passar o parâmetro <code>SkipAutoProps</code> como <code>true</code> quando executar o comando para avaliar a cobertura de código:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>TestResults -p:SkipAutoProps<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><blockquote><p>⚠️ <strong>Infelizmente, a extensão Run Coverage Report</strong> ainda não permite configurarmos os parâmetros do coverlet. Existe um pull request aberto com essa funcionalidade aguardando aprovação <a class=link href=https://github.com/the-dext/RunCoverletReport/pull/19 target=_blank rel=noopener>aqui</a>.</p></blockquote><h1 id=validando-uma-cobertura-mínima-na-pipeline-de-build>Validando uma cobertura mínima na pipeline de build</h1><p>Assim como com as regras de estilo e qualidade do código, que eu falei no meu <a class=link href=/pt/p/validando-regras-de-estilo-de-codigo-no-.net-em-tempo-de-compilacao/>post anterior</a>, precisamos validar um percentual mínimo de cobertura de código na nossa pipeline de build para manter o nível de qualidade no nosso código. O Coverlet tem um parâmetro <code>Threshold</code> onde podemos definir o percentual mínimo para caso esse percentual não seja atingido, a execução dos testes retorne uma falha:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>TestResults -p:SkipAutoProps<span class=o>=</span><span class=nb>true</span> -p:Threshold<span class=o>=</span><span class=m>80</span>
</span></span></code></pre></div><p>Também podemos passar o parâmetro <code>ThresholdType</code> para definir qual tipo de cobertura validar. Não especificando, a validação será feita em todos os tipos de cobertura (Linha, Branch e Método). Detalhes <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md#threshold target=_blank rel=noopener>aqui</a>.</p><p><img src=/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/images/ThresholdFail.png width=1115 height=628 loading=lazy alt="Exemplo de um teste com falha com o parâmetro Threshold=80" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><h1 id=referências-e-links>Referências e links</h1><ul><li><a class=link href=https://github.com/coverlet-coverage/coverlet target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet</a></li><li><a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md</a></li><li><a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md</a></li><li><a class=link href=https://github.com/danielpalme/ReportGenerator target=_blank rel=noopener>https://github.com/danielpalme/ReportGenerator</a></li><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=ChrisDexter.RunCoverletReport" target=_blank rel=noopener>https://marketplace.visualstudio.com/items?itemName=ChrisDexter.RunCoverletReport</a></li><li><a class=link href=https://github.com/the-dext/RunCoverletReport/blob/master/README.md target=_blank rel=noopener>https://github.com/the-dext/RunCoverletReport/blob/master/README.md</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/pt/tags/dotnet/>.NET</a>
<a href=/pt/tags/testes/>Testes</a>
<a href=/pt/tags/testes-de-unidade/>Testes de Unidade</a>
<a href=/pt/tags/testes-automatizados/>Testes Automatizados</a>
<a href=/pt/tags/testes-de-integra%C3%A7%C3%A3o/>Testes de Integração</a>
<a href=/pt/tags/coverlet/>Coverlet</a>
<a href=/pt/tags/cobertura-de-c%C3%B3digo/>Cobertura de código</a>
<a href=/pt/tags/c-sharp/>C#</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Conteúdo relacionado</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/pt/p/testes-de-integracao-com-aspnet-core-e-wiremocknet/><div class=article-image><img src=/pt/p/testes-de-integracao-com-aspnet-core-e-wiremocknet/cover.pt.04e9d2e1b0ae5d6cca6d3fce81113751.jpg width=1200 height=600 loading=lazy alt="Featured image of post Testes de integração sem dependências de APIs com ASP.NET Core e WireMock.Net" data-key=testes-de-integracao-com-aspnet-core-e-wiremocknet data-hash="md5-BOnS4bCuXWzKbT/OgRE3UQ=="></div><div class=article-details><h2 class=article-title>Testes de integração sem dependências de APIs com ASP.NET Core e WireMock.Net</h2></div></a></article><article class=has-image><a href=/pt/p/validando-regras-de-estilo-de-codigo-no-.net-em-tempo-de-compilacao/><div class=article-image><img src=/pt/p/validando-regras-de-estilo-de-codigo-no-.net-em-tempo-de-compilacao/cover.pt.91a831076e2dc02471933dbf3c9fe50b.png width=1300 height=250 loading=lazy alt="Featured image of post Validando regras de estilo de código no .NET em tempo de compilação" data-key=validando-regras-de-estilo-de-codigo-no-.net-em-tempo-de-compilacao data-hash="md5-kagxB24twCRxkz2/PJ/lCw=="></div><div class=article-details><h2 class=article-title>Validando regras de estilo de código no .NET em tempo de compilação</h2></div></a></article><article class=has-image><a href=/pt/p/definindo-regras-de-formatacao-no-.net-com-editorconfig/><div class=article-image><img src=/pt/p/definindo-regras-de-formatacao-no-.net-com-editorconfig/cover.pt.4159b96fc67583abeb5579415fdfe2fe.png width=1300 height=250 loading=lazy alt="Featured image of post Definindo regras de formatação no .NET com EditorConfig" data-key=definindo-regras-de-formatacao-no-.net-com-editorconfig data-hash="md5-QVm5b8Z1g6vrVXlBX9/i/g=="></div><div class=article-details><h2 class=article-title>Definindo regras de formatação no .NET com EditorConfig</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//blog-t1jttokd4v.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 Daniel Genezini</section><section class=powerby>Criado com <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Tema <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> desenvolvido por <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Índice</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#introdução>Introdução</a></li><li><a href=#o-que-é-cobertura-de-código>O que é cobertura de código?</a></li><li><a href=#analisando-a-cobertura-de-código-da-nossa-aplicação>Analisando a cobertura de código da nossa aplicação</a></li><li><a href=#gerando-relatórios-em-html>Gerando relatórios em HTML</a><ul><li><a href=#instalando-o-reportgenerator>Instalando o ReportGenerator</a></li><li><a href=#gerando-um-relatório-em-html-a-partir-de-um-relatório-opencover>Gerando um relatório em HTML a partir de um relatório opencover</a></li></ul></li><li><a href=#cobertura-de-linhas-vs-cobertura-de-branches>Cobertura de linhas vs cobertura de branches</a></li><li><a href=#cobertura-de-código-no-visual-studio>Cobertura de código no Visual Studio</a></li><li><a href=#aumentando-nossa-cobertura-de-código>Aumentando nossa cobertura de código</a><ul><li><a href=#corrigindo-os-testes-de-unidade>Corrigindo os testes de unidade</a></li><li><a href=#implementando-testes-de-integração>Implementando testes de integração</a></li><li><a href=#removendo-código-da-análise-de-cobertura-de-código>Removendo código da análise de cobertura de código</a></li><li><a href=#ignorando-auto-properties>Ignorando auto-properties</a></li></ul></li><li><a href=#validando-uma-cobertura-mínima-na-pipeline-de-build>Validando uma cobertura mínima na pipeline de build</a></li><li><a href=#referências-e-links>Referências e links</a></li></ul></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>