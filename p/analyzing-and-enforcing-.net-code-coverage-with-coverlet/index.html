<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Code quality in .NET - Part 3"><title>Analyzing and enforcing .NET code coverage with coverlet</title><link rel=canonical href=https://blog.genezini.com/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/><link rel=stylesheet href=/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css><meta property="og:title" content="Analyzing and enforcing .NET code coverage with coverlet"><meta property="og:description" content="Code quality in .NET - Part 3"><meta property="og:url" content="https://blog.genezini.com/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/"><meta property="og:site_name" content="Daniel Genezini"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="Tests"><meta property="article:tag" content="Unit Tests"><meta property="article:tag" content="Automated Tests"><meta property="article:tag" content="Integration Tests"><meta property="article:tag" content="Coverlet"><meta property="article:tag" content="Code Coverage"><meta property="article:tag" content="C#"><meta property="article:published_time" content="2022-11-03T08:10:00-03:00"><meta property="article:modified_time" content="2022-11-03T08:10:00-03:00"><meta property="og:image" content="https://blog.genezini.com/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/cover.png"><meta name=twitter:title content="Analyzing and enforcing .NET code coverage with coverlet"><meta name=twitter:description content="Code quality in .NET - Part 3"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.genezini.com/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-029SLZEC4C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-029SLZEC4C",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu793066471163999a4414bfb3be66f111_30130_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Daniel Genezini</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/dgenezini/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/danielgenezini/ target=_blank title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/GeneziniDaniel target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://blog.genezini.com/ selected>🇬🇧 English</option><option value=https://blog.genezini.com/pt/>🇧🇷 Português</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/cover.png width=1300 height=250 loading=lazy alt="Featured image of post Analyzing and enforcing .NET code coverage with coverlet"></a></div><div class=article-details><header class=article-category><a href=/categories/dotnet/>.NET</a>
<a href=/categories/c-sharp/>C#</a>
<a href=/categories/tests/>Tests</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/>Analyzing and enforcing .NET code coverage with coverlet</a></h2><h3 class=article-subtitle>Code quality in .NET - Part 3</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>03 Nov 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>7 minute read</time></div></footer><footer class=article-translations><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://blog.genezini.com/pt/p/analisando-e-validando-cobertura-de-codigo-no-.net-com-coverlet/ class=link>🇧🇷 Português</a></div></footer></div></header><section class=article-content><h1 id=introduction>Introduction</h1><p>Automated software tests are a requirement for ensuring we are delivering a product with quality to our users. It helps in finding bugs and requirements not fulfilled at development time, but also decreases the cost of maintenance by making the future changes to our code safer. Besides, the act of writing testable code alone increases the quality of the code we are writing because testable code has to be decoupled.</p><p>In this last post of this series, I&rsquo;ll show how to analyze and enforce a minimum code coverage in our applications, and how to use integration tests to increase our testing surface.</p><h1 id=what-is-code-coverage>What is code coverage?</h1><p>Code coverage is a software metric that shows how much of our code is executed (covered) by our automated tests. It is shown as a percentage and can be calculated with different formulas, based on the number of lines or branches, for example. The higher the percentage, more of our code is being tested.</p><h1 id=analyzing-the-code-coverage-of-our-application>Analyzing the code coverage of our application</h1><p>In this example, we have an ASP.NET Core API with a simple use case class that checks an input number and returns a string telling if the number is even or odd:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.Interfaces</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCase</span> <span class=p>:</span> <span class=n>IIsEvenUseCase</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>IsEven</span><span class=p>(</span><span class=kt>int</span> <span class=n>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>number</span> <span class=p>%</span> <span class=m>2</span> <span class=p>==</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;Number is even&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;Number is odd&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>For now, we have only one unit test for this use case class:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCaseTests</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>EvenNumber_ReturnsEven</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Number is even&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>To analyze the code coverage of our application, first we need to install Coverlet&rsquo;s MSBuild integration using the <code>coverlet.msbuild</code> nuget package in our test project:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Install-Package coverlet.collector
</span></span></code></pre></div><p>Then, run the <code>dotnet test</code> command with the Coverlet options on the solution or project folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>../TestResults
</span></span></code></pre></div><p>We are using the following options:</p><ul><li><strong>CollectCoverage</strong>: Inform dotnet test to use coverlet to collect the code coverage data;</li><li><strong>CoverletOutputFormat</strong>: The format of the report that coverlet will generate (opencover, cobertura, json). More <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md target=_blank rel=noopener>here</a>;</li><li><strong>CoverletOutput</strong>: The path where the coverage report will be saved in. This path is relative to the test project;</li></ul><p>This will print the code coverage result in a table and generate a report file named <code>TestResults.opencover.xml</code>:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/CommandLine1.png width=1115 height=628 loading=lazy alt="Code coverage results on the command line" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><blockquote><p>⚠️ We can also run coverlet on the command line with the <code>coverlet.collector</code> nuget package, but it has limited options and doesn&rsquo;t print the results in the command line. More details <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md target=_blank rel=noopener>here</a>;</p></blockquote><h1 id=generating-html-reports>Generating HTML reports</h1><p>Coverlet generates the report in formats that are not easily readable by humans, so we need to generate an HTML report based on Coverlet report. To do it, we&rsquo;ll usa a tool called ReportGenerator.</p><h2 id=installing-reportgenerator>Installing ReportGenerator</h2><p>ReportGenerator is installed as a .NET global tool.</p><p>To do this, we run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet tool install --global dotnet-reportgenerator-globaltool --version 4.8.6
</span></span></code></pre></div><h2 id=generating-an-html-report-of-the-opencover-report>Generating an HTML report of the opencover report</h2><p>To generate an HTML report based on a Coverlet report, we run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>reportgenerator <span class=s2>&#34;-reports:TestResults.opencover.xml&#34;</span> <span class=s2>&#34;-targetdir:coveragereport&#34;</span> -reporttypes:Html
</span></span></code></pre></div><p>We are using the following options:</p><ul><li><strong>reports</strong>: The path to the coverage report;</li><li><strong>targetdir</strong>: The path where the HTML report will be saved in;</li><li><strong>reporttypes</strong>: The format the report will be generated in.</li></ul><p>The command output will tell the relative path to the generated report: <code>coveragereport\index.html</code>.</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/Report0.png width=1115 height=628 loading=lazy alt="ReportGenerator output" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>Opening the <code>coveragereport\index.html</code> file we can see the project Line and Branch coverage:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/Report1.png width=1233 height=555 loading=lazy alt="HTML report summary" class=gallery-image data-flex-grow=222 data-flex-basis=533px></p><p>Clicking on <code>CodeCoverageSample.UseCases.IsEvenUseCase</code> we can see details of the code coverage by method (in the table) and the line and branch coverage for the class:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/Report2.png width=876 height=1196 loading=lazy alt="Details of a class on the HTML report" class=gallery-image data-flex-grow=73 data-flex-basis=175px></p><h1 id=line-vs-branch-coverage>Line vs Branch coverage</h1><p>But what is line coverage and branch coverage?</p><ul><li><strong>Line coverage</strong>: Indicates the percentage of lines that are covered by the tests;</li><li><strong>Branch coverage</strong>: Indicates the percentage of logical paths that are covered by the tests (if, else, switch condition, etc).</li></ul><p>In the example below, we can see that two lines in the <code>else</code> branch are not covered by the tests.</p><p>This will result in:</p><ul><li>50% of branch coverage, because only the <code>if</code> branch is covered;</li><li>71.4% of line coverage, because only 5 of the 7 lines are covered.</li></ul><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/LineBranchCoverage.png width=434 height=411 loading=lazy class=gallery-image data-flex-grow=105 data-flex-basis=253px></p><h1 id=code-coverage-on-visual-studio>Code coverage on Visual Studio</h1><p>The is an extension called <em><strong>Run Coverlet Report</strong></em> that integrates Coverlet and ReportGenerator with Visual Studio.</p><ol><li>First, we need to install the <code>coverlet.collector</code> nuget package in our test projects. Xunit template already has this package installed by default.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Install-Package coverlet.collector
</span></span></code></pre></div><ol start=2><li>Then, navigate to <code>Extensions > Manage extensions</code> and install the <code>Run Coverlet Report</code> extension.</li></ol><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/VisualStudioReport0.png width=941 height=575 loading=lazy class=gallery-image data-flex-grow=163 data-flex-basis=392px></p><ol start=3><li>Navigate to the new option <code>Tools > Run Code Coverage</code>. This will generate the ReportGenerator HTML report that will be open in Visual Studio.</li></ol><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/VisualStudioReport1.png width=1366 height=728 loading=lazy class=gallery-image data-flex-grow=187 data-flex-basis=450px></p><p>Also, after running the code coverage tool, Visual studio will read the coverlet report and show the coverage in our source file:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/VisualStudioIntegration1.png width=639 height=425 loading=lazy class=gallery-image data-flex-grow=150 data-flex-basis=360px></p><h1 id=improving-our-code-coverage>Improving our code coverage</h1><h2 id=fixing-the-unit-tests>Fixing the unit tests</h2><p>Now we will implement the <code>OddNumber_ReturnsOdd</code> method to test the logical path we didn&rsquo;t test before:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>CodeCoverageSample.UseCases</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenUseCaseTests</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>EvenNumber_ReturnsEven</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Number is even&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Fact]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>void</span> <span class=n>OddNumber_ReturnsOdd</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//Arrange</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>isEvenUseCase</span> <span class=p>=</span> <span class=k>new</span> <span class=n>IsEvenUseCase</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>isEvenUseCase</span><span class=p>.</span><span class=n>IsEven</span><span class=p>(</span><span class=m>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=s>&#34;Number is odd&#34;</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This will increase our average coverage to 50% of branch and 22.58% of line:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/CommandLine2.png width=1115 height=628 loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>And 100% for the <code>IsEvenUseCase</code> class:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/Report3.png width=1125 height=605 loading=lazy class=gallery-image data-flex-grow=185 data-flex-basis=446px></p><h2 id=implementing-integration-tests>Implementing integration tests</h2><p>Integration tests using the <code>WebApplicationFactory</code> class (More <a class=link href=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/>here</a>) are also considered in the code coverage reports. Let&rsquo;s look at our <code>IsEvenController</code> and <code>Program</code> classes coverage:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/IntegrationTests1.png width=572 height=349 loading=lazy class=gallery-image data-flex-grow=163 data-flex-basis=393px></p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/IntegrationTests2.png width=770 height=376 loading=lazy class=gallery-image data-flex-grow=204 data-flex-basis=491px></p><p>Let&rsquo;s implement a simple integration test. It will just instantiate our API and make a call passing a number and validate the results:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>Microsoft.AspNetCore.Mvc.Testing</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Net</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample.UnitTests.IntegrationTests</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>IsEvenIntegrationTest</span> <span class=p>:</span> <span class=n>IClassFixture</span><span class=p>&lt;</span><span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>private</span> <span class=k>readonly</span> <span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;</span> <span class=n>_factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>IsEvenIntegrationTest</span><span class=p>(</span><span class=n>WebApplicationFactory</span><span class=p>&lt;</span><span class=n>Program</span><span class=p>&gt;</span> <span class=n>factory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>_factory</span> <span class=p>=</span> <span class=n>factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>    [Theory]</span>
</span></span><span class=line><span class=cl><span class=na>    [InlineData(2, &#34;Number is even&#34;)]</span>
</span></span><span class=line><span class=cl><span class=na>    [InlineData(3, &#34;Number is odd&#34;)]</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>Number_ReturnsCorrectAndOk</span><span class=p>(</span><span class=kt>int</span> <span class=n>number</span><span class=p>,</span> <span class=kt>string</span> <span class=n>expectedResult</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>HttpClient</span> <span class=p>=</span> <span class=n>_factory</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>CreateClient</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Act</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>HttpResponse</span> <span class=p>=</span> <span class=k>await</span> <span class=n>HttpClient</span><span class=p>.</span><span class=n>GetAsync</span><span class=p>(</span><span class=s>$&#34;/iseven/{number}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//Assert</span>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=n>HttpStatusCode</span><span class=p>.</span><span class=n>OK</span><span class=p>,</span> <span class=n>HttpResponse</span><span class=p>.</span><span class=n>StatusCode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>ResponseStr</span> <span class=p>=</span> <span class=k>await</span> <span class=n>HttpResponse</span><span class=p>.</span><span class=n>Content</span><span class=p>.</span><span class=n>ReadAsStringAsync</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Assert</span><span class=p>.</span><span class=n>Equal</span><span class=p>(</span><span class=n>expectedResult</span><span class=p>,</span> <span class=n>ResponseStr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Now we run the code coverage report again and the <code>IsEvenController</code> and <code>Program</code> classes are covered by the tests:</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/IntegrationTests3.png width=583 height=347 loading=lazy class=gallery-image data-flex-grow=168 data-flex-basis=403px></p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/IntegrationTests4.png width=647 height=376 loading=lazy class=gallery-image data-flex-grow=172 data-flex-basis=412px></p><h2 id=removing-code-from-the-code-coverage-analysis>Removing code from the code coverage analysis</h2><p>If we want to remove a class or method from the code coverage analysis, we can decorate it with the <code>ExcludeFromCodeCoverage</code> attribute:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Diagnostics.CodeAnalysis</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[ExcludeFromCodeCoverage]</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>DoNotTestMe</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ℹ️ <strong>We can also create custom attributes</strong> to exclude from coverlet code coverage. Details <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md#attributes target=_blank rel=noopener>here</a>.</p></blockquote><h2 id=ignoring-auto-properties>Ignoring auto-properties</h2><p>Coverlet has the <code>SkipAutoProps</code> option to exclude the auto-properties from the coverage report.</p><p>For example, this class doesn&rsquo;t have any logic and doesn&rsquo;t need that the <code>get</code> and <code>set</code> methods of its properties be tested:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>CodeCoverageSample</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>NoLogicHere</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Id</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Name</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Just set the <code>SkipAutoProps</code> to <code>true</code> when running the code coverage from the command line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>TestResults -p:SkipAutoProps<span class=o>=</span><span class=nb>true</span>
</span></span></code></pre></div><blockquote><p>⚠️ <strong>Unfortunately, the Run Coverage Report extension</strong> still doesn&rsquo;t allow us to configure the coverlet parameters. There is an open pull request with this feature awaiting for approval <a class=link href=https://github.com/the-dext/RunCoverletReport/pull/19 target=_blank rel=noopener>here</a>.</p></blockquote><h1 id=enforcing-a-minimum-code-coverage-on-the-build-pipeline>Enforcing a minimum code coverage on the build pipeline</h1><p>Just like code style and code quality rules, that I talked about in my <a class=link href=/p/enforcing-.net-code-style-rules-at-compile-time/>previous post</a>, we need to enforce a minimum code coverage in our build pipeline to maintain a level of quality in our code. Coverlet has the <code>Threshold</code> option that we can set to a minimum percentage and it will fail the tests if our code coverage is below this percentage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet <span class=nb>test</span> -p:CollectCoverage<span class=o>=</span><span class=nb>true</span> -p:CoverletOutputFormat<span class=o>=</span>opencover -p:CoverletOutput<span class=o>=</span>TestResults -p:SkipAutoProps<span class=o>=</span><span class=nb>true</span> -p:Threshold<span class=o>=</span><span class=m>80</span>
</span></span></code></pre></div><p>We can also use the <code>ThresholdType</code> option to set the type of coverage to enforce. Not specifying will enforce all types of coverage (Line, Branch and Method). Details <a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md#threshold target=_blank rel=noopener>here</a>.</p><p><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/images/ThresholdFail.png width=1115 height=628 loading=lazy alt="Example of a failed test with Threshold=80" class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><h1 id=references-and-links>References and Links</h1><ul><li><a class=link href=https://github.com/coverlet-coverage/coverlet target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet</a></li><li><a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/MSBuildIntegration.md</a></li><li><a class=link href=https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md target=_blank rel=noopener>https://github.com/coverlet-coverage/coverlet/blob/master/Documentation/VSTestIntegration.md</a></li><li><a class=link href=https://github.com/danielpalme/ReportGenerator target=_blank rel=noopener>https://github.com/danielpalme/ReportGenerator</a></li><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=ChrisDexter.RunCoverletReport" target=_blank rel=noopener>https://marketplace.visualstudio.com/items?itemName=ChrisDexter.RunCoverletReport</a></li><li><a class=link href=https://github.com/the-dext/RunCoverletReport/blob/master/README.md target=_blank rel=noopener>https://github.com/the-dext/RunCoverletReport/blob/master/README.md</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/dotnet/>.NET</a>
<a href=/tags/tests/>Tests</a>
<a href=/tags/unit-tests/>Unit Tests</a>
<a href=/tags/automated-tests/>Automated Tests</a>
<a href=/tags/integration-tests/>Integration Tests</a>
<a href=/tags/coverlet/>Coverlet</a>
<a href=/tags/code-coverage/>Code Coverage</a>
<a href=/tags/c-sharp/>C#</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/><div class=article-image><img src=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/cover.1073cba4dbcca9097bafc80e0fb80bae.jpg width=1200 height=600 loading=lazy alt="Featured image of post Integration tests without API dependencies with ASP.NET Core and WireMock.Net" data-hash="md5-EHPLpNvMqQl7r8gOD7gLrg=="></div><div class=article-details><h2 class=article-title>Integration tests without API dependencies with ASP.NET Core and WireMock.Net</h2></div></a></article><article class=has-image><a href=/p/enforcing-.net-code-style-rules-at-compile-time/><div class=article-image><img src=/p/enforcing-.net-code-style-rules-at-compile-time/cover.5ae17a9488123306b007150bdb933d3e.png width=1300 height=250 loading=lazy alt="Featured image of post Enforcing .NET code style rules at compile time" data-hash="md5-WuF6lIgSMwawBxUL25M9Pg=="></div><div class=article-details><h2 class=article-title>Enforcing .NET code style rules at compile time</h2></div></a></article><article class=has-image><a href=/p/defining-formatting-rules-in-.net-with-editorconfig/><div class=article-image><img src=/p/defining-formatting-rules-in-.net-with-editorconfig/cover.274d1e6d56b47b9362ea1f2779122aeb.png width=1300 height=250 loading=lazy alt="Featured image of post Defining formatting rules in .NET with EditorConfig" data-hash="md5-J00ebVa0e5Ni6h8neRIq6w=="></div><div class=article-details><h2 class=article-title>Defining formatting rules in .NET with EditorConfig</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//blog-t1jttokd4v.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 Daniel Genezini</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#what-is-code-coverage>What is code coverage?</a></li><li><a href=#analyzing-the-code-coverage-of-our-application>Analyzing the code coverage of our application</a></li><li><a href=#generating-html-reports>Generating HTML reports</a><ul><li><a href=#installing-reportgenerator>Installing ReportGenerator</a></li><li><a href=#generating-an-html-report-of-the-opencover-report>Generating an HTML report of the opencover report</a></li></ul></li><li><a href=#line-vs-branch-coverage>Line vs Branch coverage</a></li><li><a href=#code-coverage-on-visual-studio>Code coverage on Visual Studio</a></li><li><a href=#improving-our-code-coverage>Improving our code coverage</a><ul><li><a href=#fixing-the-unit-tests>Fixing the unit tests</a></li><li><a href=#implementing-integration-tests>Implementing integration tests</a></li><li><a href=#removing-code-from-the-code-coverage-analysis>Removing code from the code coverage analysis</a></li><li><a href=#ignoring-auto-properties>Ignoring auto-properties</a></li></ul></li><li><a href=#enforcing-a-minimum-code-coverage-on-the-build-pipeline>Enforcing a minimum code coverage on the build pipeline</a></li><li><a href=#references-and-links>References and Links</a></li></ul></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>