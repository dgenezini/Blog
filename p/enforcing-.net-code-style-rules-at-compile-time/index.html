<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Code quality in .NET - Part 2"><title>Enforcing .NET code style rules at compile time</title><link rel=canonical href=https://blog.genezini.com/p/enforcing-.net-code-style-rules-at-compile-time/><link rel=stylesheet href=/scss/style.min.0d7311e8ecbffaf1f496b40c0748b6081f4dc7a26419abb5641348a565fc6b2c.css><meta property="og:title" content="Enforcing .NET code style rules at compile time"><meta property="og:description" content="Code quality in .NET - Part 2"><meta property="og:url" content="https://blog.genezini.com/p/enforcing-.net-code-style-rules-at-compile-time/"><meta property="og:site_name" content="Daniel Genezini"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="dotnet"><meta property="article:tag" content="EditorConfig"><meta property="article:tag" content="Code Style"><meta property="article:tag" content="Analyzers"><meta property="article:tag" content="Roslyn"><meta property="article:tag" content="C#"><meta property="article:published_time" content="2022-10-25T08:00:00-03:00"><meta property="article:modified_time" content="2022-10-25T08:00:00-03:00"><meta property="og:image" content="https://blog.genezini.com/p/enforcing-.net-code-style-rules-at-compile-time/cover.png"><meta name=twitter:title content="Enforcing .NET code style rules at compile time"><meta name=twitter:description content="Code quality in .NET - Part 2"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.genezini.com/p/enforcing-.net-code-style-rules-at-compile-time/cover.png"><script async src="https://www.googletagmanager.com/gtag/js?id=G-029SLZEC4C"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-029SLZEC4C",{anonymize_ip:!1})}</script></head><body class="article-page
//"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu793066471163999a4414bfb3be66f111_30130_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Daniel Genezini</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/dgenezini/ target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/danielgenezini/ target=_blank title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/GeneziniDaniel target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/index.xml target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>RSS</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://blog.genezini.com/ selected>üá¨üáß English</option><option value=https://blog.genezini.com/pt/>üáßüá∑ Portugu√™s</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/enforcing-.net-code-style-rules-at-compile-time/><img src=/p/enforcing-.net-code-style-rules-at-compile-time/cover.png width=1300 height=250 loading=lazy alt="Featured image of post Enforcing .NET code style rules at compile time"></a></div><div class=article-details><header class=article-category><a href=/categories/dotnet/>.NET</a>
<a href=/categories/c-sharp/>C#</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/enforcing-.net-code-style-rules-at-compile-time/>Enforcing .NET code style rules at compile time</a></h2><h3 class=article-subtitle>Code quality in .NET - Part 2</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>25 Oct 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>8 minute read</time></div></footer><footer class=article-translations><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://blog.genezini.com/pt/p/validando-regras-de-estilo-de-codigo-no-.net-em-tempo-de-compilacao/ class=link>üáßüá∑ Portugu√™s</a></div></footer></div></header><section class=article-content><h1 id=introduction>Introduction</h1><p>Static code analysis is a great tool for spotting some kinds of error in your code, for example, not disposing of objects that implement IDisposable. Also, it helps to enforce and validate if the code written is following a defined standard, for example, using PascalCase for class names and camelCase for parameter names.</p><p>In this post I&rsquo;ll show how to use Roslyn Analyzers with C# to enforce some standards of code quality and code style on your code, throwing errors at compile time if any rules are not being respected and not allowing the code to be pushed to protected branches of the repository.</p><h1 id=roslyn-analyzers>Roslyn Analyzers</h1><p><a class=link href=https://github.com/dotnet/roslyn target=_blank rel=noopener>Roslyn</a> is the compiler platform for .NET. Roslyn Analyzers are static code analysis tools for Roslyn. They inspect your code for style, quality, maintainability, and practices that are likely to cause bugs. They work based on predefined rules that can have their severity configured in the <code>EditorConfig</code> file.</p><p>.NET 5 and later have the analyzers enabled by default. To enable them in earlier versions of .NET, you can set the property <code>EnableNETAnalyzers</code> to <code>true</code> on project files that uses a <a class=link href=https://learn.microsoft.com/en-us/dotnet/core/project-sdk/overview target=_blank rel=noopener>project SDK</a> or install them as a nuget package:</p><h2 id=setting-enablenetanalyzers-on-the-project-file>Setting EnableNETAnalyzers on the project file</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;EnableNETAnalyzers&gt;</span>true<span class=nt>&lt;/EnableNETAnalyzers&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=installing-as-a-nuget-package>Installing as a nuget package</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Install-Package Microsoft.CodeAnalysis.NetAnalyzers
</span></span></code></pre></div><h2 id=enabling-more-analyzers>Enabling more analyzers</h2><p>By default, only some rules are enabled, but we can configure this with the <code>AnalysisMode</code> property in the project file:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;AnalysisMode&gt;</span>Recommended<span class=nt>&lt;/AnalysisMode&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>The <code>AnalysisMode</code> property values allowed are different for .NET 6 and .NET 5 SDKs. Details <a class=link href=https://learn.microsoft.com/en-us/dotnet/core/project-sdk/msbuild-props#analysismode target=_blank rel=noopener>here</a>.</p><h2 id=how-to-enable-net-analyzers-in-vs-code>How to enable .NET Analyzers in VS Code</h2><p>.NET Analyzers work by default in Visual Studio, but they have to be enabled in VS Code.</p><p>1 - Navigate to <code>File > Preferences > Settings</code>.</p><p>2 - Navigate to <code>Extensions > C# configuration</code> or search for <code>omnisharp.enableRoslynAnalyzers</code>.</p><p>3 - Check the <code>Omnisharp: Enable Roslyn Analyzers</code> option.</p><p>4 - Navigate to <code>Extensions > C# configuration</code> or search for <code>omnisharp.enableEditorConfigSupport</code>.</p><p>5 - Check the <code>Omnisharp: Enable Editor Config Support</code> option.</p><p>6 - Restart C#/Omnisharp extension or VS Code.</p><h2 id=types-of-rules>Types of rules</h2><p>.NET Analyzers have many categories of rules, but here I&rsquo;ll list just a few to explain how they interact with Visual Studio&rsquo;s features.</p><ul><li><p><strong>Standard formatting</strong>: Default Editorconfig options, like indent size and tabs or spaces;</p></li><li><p><strong>Code Style - .NET Formatting</strong>: Language specific indentation, whitespaces, and wrapping. For instance, use spaces before parentheses in method definitions.</p></li><li><p><strong>Code Style - .NET Language</strong>: C# and Visual Basic specific rules. Examples: using <code>var</code> instead of an explicit type, prefer auto properties instead of backing fields.</p></li><li><p><strong>Code Style - Naming Conventions</strong>: Rules about the naming of code elements, like enforcing PascalCase for classes&rsquo; names and Async at the end of async methods&rsquo; names.</p></li><li><p><strong>Code Style - Unnecessary code</strong>: Rules for code that is unreachable or unused variables, fields, etc.</p></li><li><p><strong>Code Quality</strong>: Rules to improve code quality. These rules help identify code that are likely to cause bugs or security problems. Examples: Do not declare static members on generic types, and Enums should have zero value.</p></li></ul><p>The table below shows in which features of Visual Studio the fixes for these types of rules are applied on.</p><div class=table-wrapper><table><thead><tr><th>Fixes applied on</th><th style=text-align:center>üñπ Format</th><th style=text-align:center>üßπ Code Cleanup</th><th style=text-align:center>üí° Code Fix</th></tr></thead><tbody><tr><td>Standard Formatting</td><td style=text-align:center>‚úîÔ∏è</td><td style=text-align:center>‚úîÔ∏è</td><td style=text-align:center>‚úîÔ∏è</td></tr><tr><td>.NET Formatting</td><td style=text-align:center>‚úîÔ∏è</td><td style=text-align:center>‚úîÔ∏è</td><td style=text-align:center>‚úîÔ∏è</td></tr><tr><td>.NET Language</td><td style=text-align:center></td><td style=text-align:center>‚úîÔ∏è</td><td style=text-align:center>‚úîÔ∏è</td></tr><tr><td>Naming Conventions</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>‚úîÔ∏è</td></tr><tr><td>Unnecessary Code</td><td style=text-align:center></td><td style=text-align:center>‚ùó</td><td style=text-align:center>‚úîÔ∏è</td></tr><tr><td>Code Quality</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>‚ùó</td></tr></tbody></table></div><blockquote><p>‚ùó Only some rules have fixes applied.</p></blockquote><blockquote><p>üí° In the <a class=link href=/p/defining-formatting-rules-in-.net-with-editorconfig/>previous post of this series</a>, I explain how to configure Visual Studio to apply this rules on Code Cleanup and how to auto execute Code Cleanup on file save.</p></blockquote><h1 id=enforcing-rules-in-our-code>Enforcing rules in our code</h1><p>Rules are configured in the EditorConfig file (that I explained in a <a class=link href=/p/defining-formatting-rules-in-.net-with-editorconfig/>Part 1</a> of this series) and their severity can be defined in three levels. Conflicts in the rules are resolved in the following order:</p><ol><li>Specific rules</li><li>Category rules</li><li>All analyzers rules</li></ol><p>In the example below, Naming rules violations (<code>IDE1006</code>) will be considered <code>Warning</code>, because it is defined for the specific rule:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Defines that all analyzers rules are suggestions</span>
</span></span><span class=line><span class=cl>dotnet_analyzer_diagnostic.severity <span class=o>=</span> suggestion
</span></span><span class=line><span class=cl><span class=c1># Defines that all Code Style analyzers rules are errors</span>
</span></span><span class=line><span class=cl>dotnet_analyzer_diagnostic.category-Style.severity <span class=o>=</span> error
</span></span><span class=line><span class=cl><span class=c1># Defines that the rule IDE1006 is a warning</span>
</span></span><span class=line><span class=cl>dotnet_diagnostic.IDE1006.severity <span class=o>=</span> warning
</span></span></code></pre></td></tr></table></div></div><h2 id=1-generate-an-editorconfig-file-from-visual-studio>1. Generate an EditorConfig file from Visual Studio</h2><p>First, we need to create an EditorConfig file with the configuration of the rules we will use as standards.</p><p>Visual Studio has a tool to help you configure the <strong>code style</strong> rules of your EditorConfig file, showing a snippet of code of how the rules work.</p><ol><li>Go to Tools > Options > Text Editor > C# > Code Style;</li><li>Configure your Code Style preferences in the General, Formatting and Naming sub-menus.
‚ö†Ô∏è Don&rsquo;t bother setting the severities here; some of them are only respected by Visual Studio and are not enforced on build and other IDEs;</li><li>Back in the General sub-menu, click <code>Generate .editoconfig file from settings</code> and save it in the folder your solution file is in (<code>.sln</code>).</li></ol><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/VisualStudioGenerateEditorConfig.png width=1061 height=569 loading=lazy alt="Configuring code style rules for the EditorConfig file" class=gallery-image data-flex-grow=186 data-flex-basis=447px></p><blockquote><p>‚ö†Ô∏è If you are not using Visual Studio, you can use a sample and change it to your preferences, like the one from <a class=link href=https://github.com/dotnet/roslyn/blob/main/.editorconfig target=_blank rel=noopener>Roslyn</a>.</p></blockquote><h2 id=2-configure-all-projects-to-use-the-recommended-net-analyzers>2. Configure all projects to use the recommended .NET Analyzers</h2><p>Next, we set the AnalysisMode property in all our project files.</p><p>For .NET 6 SDK and later, set it to <code>Recommended</code> or <code>All</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;AnalysisMode&gt;</span>Recommended<span class=nt>&lt;/AnalysisMode&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=3-set-severity-error-for-all-analyzers-rules>3. Set severity Error for all analyzers rules</h2><p>In our EditorConfig, include this line to set severity to <code>error</code> for all rules.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Set severity = error for all analyzers</span>
</span></span><span class=line><span class=cl>dotnet_analyzer_diagnostic.severity <span class=o>=</span> error
</span></span></code></pre></div><h2 id=4-correct-the-errors-and-override-the-severity-for-rules-you-dont-want-to-use>4. Correct the errors and override the severity for rules you don&rsquo;t want to use</h2><p>If you are enabling the analyzers in an existing project, many errors will be shown. Correct them and override their severity if they don&rsquo;t apply for you or you won&rsquo;t correct them at the moment.</p><blockquote><p>üí° In the <a class=link href=/p/defining-formatting-rules-in-.net-with-editorconfig/>previous post of this series</a>, I explain how to add fixers to Visual Studio&rsquo;s Code Cleanup. You can customize it to fix some rules violations.</p></blockquote><h3 id=setting-rules-severity-directly-in-editorconfig-file>Setting rules severity directly in EditorConfig file</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Other rules ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set severity = none to the rules that are not important for me</span>
</span></span><span class=line><span class=cl>dotnet_diagnostic.IDE0075.severity <span class=o>=</span> none
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set severity = warning to the rules that need to be resolved later</span>
</span></span><span class=line><span class=cl>dotnet_diagnostic.IDE0047.severity <span class=o>=</span> warning
</span></span></code></pre></td></tr></table></div></div><h3 id=setting-rules-severity-from-visual-studios-error-list>Setting rules severity from Visual Studio&rsquo;s Error List</h3><p>For errors showing up in the Error List, you can right click on the rule and click on <code>Set severity > Choose a severity</code>. The severity configuration will be added to the EditorConfig file.</p><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/VisualStudioSetSeverityErrors.png width=734 height=342 loading=lazy alt="Setting severity for a rule" class=gallery-image data-flex-grow=214 data-flex-basis=515px></p><h3 id=setting-rules-severity-from-visual-studios-solution-explorer>Setting rules severity from Visual Studio&rsquo;s Solution Explorer</h3><p>From Solution Explorer, open the <code>Dependencies > Analyzers</code> node below your project, then right click on the rule and click on <code>Set severity > Choose a severity</code>. The severity configuration will be added to the EditorConfig file.</p><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/VisualStudioSetSeveritySolution.png width=549 height=608 loading=lazy alt="Setting severity for a rule" class=gallery-image data-flex-grow=90 data-flex-basis=216px></p><h2 id=5-enforce-the-rules-on-build>5. Enforce the rules on build</h2><p>Enabling the analyzers only shows the messages in our IDE. To really enforce those rules, we have to inform the compiler to fail in case of rules violations, blocking changes that are not compliant to the standard to be merged into protected branches of the repository.</p><p>To do this, we need to enable the property <code>EnforceCodeStyleInBuild</code> in all our project files.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;EnforceCodeStyleInBuild&gt;</span>true<span class=nt>&lt;/EnforceCodeStyleInBuild&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=examples-of-rules-being-enforced>Examples of rules being enforced</h2><h3 id=rules-being-enforced-on-visual-studio>Rules being enforced on Visual Studio</h3><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/VisualStudioExample.png width=1366 height=728 loading=lazy class=gallery-image data-flex-grow=187 data-flex-basis=450px></p><h3 id=rules-being-enforced-on-vs-code>Rules being enforced on VS Code</h3><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/VSCodeExample.png width=1366 height=728 loading=lazy class=gallery-image data-flex-grow=187 data-flex-basis=450px></p><h3 id=rules-being-enforced-on-dotnet-build-command>Rules being enforced on dotnet build command</h3><p><img src=/p/enforcing-.net-code-style-rules-at-compile-time/images/dotnetbuildExample.png width=1112 height=625 loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=427px></p><h1 id=creating-additional-naming-conventions>Creating additional naming conventions</h1><p>Here are some naming conventions of the C# language:</p><div class=table-wrapper><table><thead><tr><th>Symbols</th><th>Convention</th><th>Example</th></tr></thead><tbody><tr><td>class/record/struct</td><td>PascalCase</td><td>PhysicalAddress</td></tr><tr><td>interface</td><td>&ldquo;I&rdquo;+PascalCase</td><td>IWorkerQueue</td></tr><tr><td>public members</td><td>PascalCase</td><td>StartEventProcessing</td></tr><tr><td>private/internal fields</td><td>&ldquo;_"+camelCase</td><td>_workerQueue</td></tr><tr><td>static fields</td><td>&ldquo;s_"+camelCase</td><td>s_workerQueue</td></tr><tr><td>local variables *Ô∏è</td><td>camelCase</td><td>isValid</td></tr><tr><td>parameters</td><td>camelCase</td><td>name</td></tr><tr><td>async methods</td><td>PascalCase+&ldquo;Async&rdquo;</td><td>GetStringAsync</td></tr></tbody></table></div><p>More details <a class=link href=https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/coding-style/coding-conventions target=_blank rel=noopener>here</a>.</p><p>By default, Visual Studio doesn&rsquo;t create naming conventions for static fields, local variables, parameters and async methods. If we want to use them, we have to manually set those rules, as shown below.</p><blockquote><p>*Ô∏è Not specified in the docs, but <a class=link href=https://github.com/dotnet/roslyn/blob/main/.editorconfig#L123 target=_blank rel=noopener>Roslyn uses this convention</a>.</p></blockquote><h2 id=creating-the-naming-convention-for-async-methods>Creating the naming convention for async methods</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet_naming_rule.async_methods_should_be_pascalcase_async.severity <span class=o>=</span> error
</span></span><span class=line><span class=cl>dotnet_naming_rule.async_methods_should_be_pascalcase_async.symbols <span class=o>=</span> async_methods
</span></span><span class=line><span class=cl>dotnet_naming_rule.async_methods_should_be_pascalcase_async.style <span class=o>=</span> pascalcase_async
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dotnet_naming_symbols.async_methods.applicable_kinds <span class=o>=</span> method
</span></span><span class=line><span class=cl>dotnet_naming_symbols.async_methods.applicable_accessibilities <span class=o>=</span> *
</span></span><span class=line><span class=cl>dotnet_naming_symbols.async_methods.required_modifiers <span class=o>=</span> async
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dotnet_naming_style.pascalcase_async.required_suffix <span class=o>=</span> Async
</span></span><span class=line><span class=cl>dotnet_naming_style.pascalcase_async.capitalization <span class=o>=</span> pascal_case
</span></span></code></pre></td></tr></table></div></div><h2 id=creating-the-naming-convention-for-local-variables-and-parameters>Creating the naming convention for local variables and parameters</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dotnet_naming_rule.locals_and_parameters_should_be_pascal_case.severity <span class=o>=</span> error
</span></span><span class=line><span class=cl>dotnet_naming_rule.locals_and_parameters_should_be_pascal_case.symbols <span class=o>=</span> locals_and_parameters
</span></span><span class=line><span class=cl>dotnet_naming_rule.locals_and_parameters_should_be_pascal_case.style <span class=o>=</span> camel_case
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dotnet_naming_symbols.locals_and_parameters.applicable_kinds <span class=o>=</span> parameter, <span class=nb>local</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dotnet_naming_style.camel_case.capitalization <span class=o>=</span> camel_case
</span></span></code></pre></td></tr></table></div></div><h1 id=how-to-ignore-the-ca1707-rule-identifiers-should-not-contain-underscores-on-test-projects>How to ignore the CA1707 rule (Identifiers should not contain underscores) on test projects</h1><p>Some conventions for naming test methods use underscore. If that is your case, you will receive a violation for the CA1707 rule.
To disable the rule only on the test project, create a file named <code>GlobalSuppressions.cs</code> in the root of your test project with the content below.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>System.Diagnostics.CodeAnalysis</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[assembly: SuppressMessage(&#34;Naming&#34;, &#34;CA1707:Identifiers should not contain underscores&#34;, Justification = &#34;Not applicable for test names&#34;, Scope = &#34;module&#34;)]</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=third-party-analyzers>Third-party analyzers</h1><p>There are third-party analyzers that can have additional rules that can be useful. These are some:</p><ul><li><a class=link href=https://github.com/JosefPihrt/Roslynator target=_blank rel=noopener>Roslynator</a></li><li><a class=link href=https://github.com/DotNetAnalyzers/StyleCopAnalyzers target=_blank rel=noopener>StyleCop</a></li><li><a class=link href=https://github.com/SonarSource/sonar-dotnet target=_blank rel=noopener>Sonar Analyzer</a></li></ul><h1 id=references-and-links>References and Links</h1><ul><li><a class=link href="https://learn.microsoft.com/en-us/visualstudio/code-quality/install-net-analyzers?view=vs-2022" target=_blank rel=noopener>https://learn.microsoft.com/en-us/visualstudio/code-quality/install-net-analyzers?view=vs-2022</a></li><li><a class=link href=https://www.jetbrains.com/help/rider/Using_EditorConfig.html#export-code-style-settings target=_blank rel=noopener>https://www.jetbrains.com/help/rider/Using_EditorConfig.html#export-code-style-settings</a></li><li><a class=link href="https://marketplace.visualstudio.com/items?itemName=MadsKristensen.EditorConfig" target=_blank rel=noopener>https://marketplace.visualstudio.com/items?itemName=MadsKristensen.EditorConfig</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/dotnet/>.NET</a>
<a href=/tags/editorconfig/>EditorConfig</a>
<a href=/tags/code-style/>Code Style</a>
<a href=/tags/analyzers/>Analyzers</a>
<a href=/tags/roslyn/>Roslyn</a>
<a href=/tags/c-sharp/>C#</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/git-tips/><div class=article-image><img src=/cover.png loading=lazy data-key data-hash=/cover.png></div><div class=article-details><h2 class=article-title>Git tips</h2></div></a></article><article class=has-image><a href=/p/defining-formatting-rules-in-.net-with-editorconfig/><div class=article-image><img src=/p/defining-formatting-rules-in-.net-with-editorconfig/cover.274d1e6d56b47b9362ea1f2779122aeb.png width=1300 height=250 loading=lazy alt="Featured image of post Defining formatting rules in .NET with EditorConfig" data-hash="md5-J00ebVa0e5Ni6h8neRIq6w=="></div><div class=article-details><h2 class=article-title>Defining formatting rules in .NET with EditorConfig</h2></div></a></article><article class=has-image><a href=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/><div class=article-image><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/cover.4f8029464d90450d6f2a4bf48bcd8091.png width=1300 height=250 loading=lazy alt="Featured image of post Analyzing and enforcing .NET code coverage with coverlet" data-hash="md5-T4ApRk2QRQ1vKkv0i82AkQ=="></div><div class=article-details><h2 class=article-title>Analyzing and enforcing .NET code coverage with coverlet</h2></div></a></article><article class=has-image><a href=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/><div class=article-image><img src=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/cover.1073cba4dbcca9097bafc80e0fb80bae.jpg width=1200 height=600 loading=lazy alt="Featured image of post Integration tests without API dependencies with ASP.NET Core and WireMock.Net" data-hash="md5-EHPLpNvMqQl7r8gOD7gLrg=="></div><div class=article-details><h2 class=article-title>Integration tests without API dependencies with ASP.NET Core and WireMock.Net</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//blog-t1jttokd4v.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2022 Daniel Genezini</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><script async src=//static.getclicky.com/101386558.js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101386558ns.gif></p></noscript><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><h2 class="widget-title section-title">Series</h2><div class=article-list--mini><article><a href=/p/defining-formatting-rules-in-.net-with-editorconfig/><div class=article-details><div class=article-seriespart>Part &nbsp;1</div><h2 class=article-title>Defining formatting rules in .NET with EditorConfig</h2></div></a></article><article><a href=/p/enforcing-.net-code-style-rules-at-compile-time/><div class=article-details><div class=article-seriespart>Part &nbsp;2</div><h2 class=article-title>Enforcing .NET code style rules at compile time</h2></div></a></article><article><a href=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/><div class=article-details><div class=article-seriespart>Part &nbsp;3</div><h2 class=article-title>Analyzing and enforcing .NET code coverage with coverlet</h2></div></a></article></div></section><section class="widget archives"><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#roslyn-analyzers>Roslyn Analyzers</a><ul><li><a href=#setting-enablenetanalyzers-on-the-project-file>Setting EnableNETAnalyzers on the project file</a></li><li><a href=#installing-as-a-nuget-package>Installing as a nuget package</a></li><li><a href=#enabling-more-analyzers>Enabling more analyzers</a></li><li><a href=#how-to-enable-net-analyzers-in-vs-code>How to enable .NET Analyzers in VS Code</a></li><li><a href=#types-of-rules>Types of rules</a></li></ul></li><li><a href=#enforcing-rules-in-our-code>Enforcing rules in our code</a><ul><li><a href=#1-generate-an-editorconfig-file-from-visual-studio>1. Generate an EditorConfig file from Visual Studio</a></li><li><a href=#2-configure-all-projects-to-use-the-recommended-net-analyzers>2. Configure all projects to use the recommended .NET Analyzers</a></li><li><a href=#3-set-severity-error-for-all-analyzers-rules>3. Set severity Error for all analyzers rules</a></li><li><a href=#4-correct-the-errors-and-override-the-severity-for-rules-you-dont-want-to-use>4. Correct the errors and override the severity for rules you don&rsquo;t want to use</a></li><li><a href=#5-enforce-the-rules-on-build>5. Enforce the rules on build</a></li><li><a href=#examples-of-rules-being-enforced>Examples of rules being enforced</a></li></ul></li><li><a href=#creating-additional-naming-conventions>Creating additional naming conventions</a><ul><li><a href=#creating-the-naming-convention-for-async-methods>Creating the naming convention for async methods</a></li><li><a href=#creating-the-naming-convention-for-local-variables-and-parameters>Creating the naming convention for local variables and parameters</a></li></ul></li><li><a href=#how-to-ignore-the-ca1707-rule-identifiers-should-not-contain-underscores-on-test-projects>How to ignore the CA1707 rule (Identifiers should not contain underscores) on test projects</a></li><li><a href=#third-party-analyzers>Third-party analyzers</a></li><li><a href=#references-and-links>References and Links</a></li></ul></nav></div></section><section class="widget archives"><h2 class="widget-title section-title">Related content</h2><div class=article-list--mini><article><a href=/p/git-tips/><div class=article-details><h2 class=article-title>Git tips</h2><footer class=article-time><time datetime=2022-11-07T07:30:00-03:00>07 Nov 2022</time></footer></div><div class=article-image><img src=/cover.png loading=lazy alt="Featured image of post Git tips"></div></a></article><article><a href=/p/defining-formatting-rules-in-.net-with-editorconfig/><div class=article-details><h2 class=article-title>Defining formatting rules in .NET with EditorConfig</h2><footer class=article-time><time datetime=2022-10-18T08:00:00-03:00>18 Oct 2022</time></footer></div><div class=article-image><img src=/p/defining-formatting-rules-in-.net-with-editorconfig/cover.png width=1300 height=250 alt="Defining formatting rules in .NET with EditorConfig" loading=lazy></div></a></article><article><a href=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/><div class=article-details><h2 class=article-title>Analyzing and enforcing .NET code coverage with coverlet</h2><footer class=article-time><time datetime=2022-11-03T08:10:00-03:00>03 Nov 2022</time></footer></div><div class=article-image><img src=/p/analyzing-and-enforcing-.net-code-coverage-with-coverlet/cover.png width=1300 height=250 alt="Analyzing and enforcing .NET code coverage with coverlet" loading=lazy></div></a></article><article><a href=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/><div class=article-details><h2 class=article-title>Integration tests without API dependencies with ASP.NET Core and WireMock.Net</h2><footer class=article-time><time datetime=2022-09-25T08:00:00-03:00>25 Sep 2022</time></footer></div><div class=article-image><img src=/p/integration-tests-without-api-dependencies-with-asp.net-core-and-wiremock.net/cover.jpg width=1200 height=600 alt="Integration tests without API dependencies with ASP.NET Core and WireMock.Net" loading=lazy></div></a></article></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>